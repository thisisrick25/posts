---
title: Git Configuration Based on Remote Repositories
description: Git Configuration Based on Remote Repositories
publishedAt: 2025-10-03
isPublished: true
tags:
  - git
---

## Problem

Working with multiple git repos on different hosts (like GitHub, GitLab) can be cumbersome when it comes to managing SSH keys and commit signing. 

How it works
- Use `~/.ssh/config` to select the right SSH key per host.
- Use Git's `includeIf` to load host-specific `.gitconfig` only when a repository uses that remote.
- Configure commit signing per host and register allowed signers on the server.


## Step-by-step setup

### 1. Create a SSH config file at `~/.ssh/config`

```shell title="C://Users/username/.ssh/config"
# github
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_github_auth
    IdentitiesOnly yes

# gitlab
Host gitlab.com
    HostName gitlab.com
    User git
    IdentityFile ~/.ssh/id_ed25519_gitlab_auth
    IdentitiesOnly yes
```

> `~/.ssh/config` is optional but useful if you use different SSH keys for different hosts. It ensures the correct key is used for authentication.

### 2. Create a Git configuration file for GitLab at `~/.gitconfig-gitlab`

```shell title="C://Users/username/.gitconfig-gitlab"
[user]
	signingkey = C:\\Users\\username\\.ssh\\id_ed25519_gitlab_sign.pub
```

### 3. Update your global Git configuration at `~/.gitconfig` to include the GitLab config when a repository uses a GitLab remote.

```shell title="C://Users/username/.gitconfig" {14-17}
[user]
	name = thisisrick25
	email = swapnaneel06@gmail.com
	signingkey = C:\\Users\\username\\.ssh\\id_ed25519_github_sign.pub
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
[gpg]
	format = ssh
[commit]
	gpgsign = true
[includeIf "hasconfig:remote.*.url:*gitlab.com*/**"]
    path = ~/.gitconfig-gitlab
[includeIf "hasconfig:remote.*.url:https://gitlab.com/**"]
    path = ~/.gitconfig-gitlab
```
> `gitlab.com*/**` is used for SSH remotes for GitLab. `https://gitlab.com/**` is used for HTTPS remotes for GitLab.
